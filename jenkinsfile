pipeline {
    agent any

    triggers {
        githubPush()  // Automatically trigger on GitHub push
    }

    environment {
        PROJECT_NAME = "GlassLoginSignup"
    }

    options {
        disableConcurrentBuilds()
        timestamps()
    }

    stages {
        stage('Checkout Code') {
            steps {
                echo " Pulling latest code from GitHub..."
                checkout scm
            }
        }

        stage('Build') {
            steps {
                echo " Building project: ${env.PROJECT_NAME}"
                bat '''
                echo No compilation needed for HTML/CSS/JS project.
                dir
                '''
            }
        }

        stage('Test') {
            steps {
                echo " Checking required files..."
                bat '''
                if exist index.html (
                    echo  index.html found
                ) else (
                    echo  index.html missing
                    exit /b 1
                )

                if exist style.css (
                    echo  style.css found
                ) else (
                    echo  style.css missing
                    exit /b 1
                )

                if exist script.js (
                    echo  script.js found
                ) else (
                    echo  script.js missing
                    exit /b 1
                )
                '''
            }
        }

        stage('Archive Artifacts') {
            steps {
                echo " Archiving HTML/CSS/JS files..."
                archiveArtifacts artifacts: '**/*.html, **/*.css, **/*.js', fingerprint: true
            }
        }
    }

    post {
        success {
            echo " Build triggered by GitHub push completed successfully!"
        }
        failure {
            echo " Build failed. Please check logs for errors."
        }
    }
}
